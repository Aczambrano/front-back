@if (showLoader) {
<app-loader></app-loader>
}
@if (account) {
<div class="dashboard-summary">
    <div class="summary-card">
        <div class="summary-content">
            <h3 class="summary-title">
                <p>{{account.owner}}</p>
            </h3>
            <span class="summary-description"> Acc. number: {{account.accountNumber}}</span>
        </div>
        <div class="summary-image">
            <img src="assets/images/user-1.jpg" alt="Julia Illustration" />
        </div>
    </div>
    <div class="summary-card">
        <div class="summary-content">
            <h3 class="summary-title">Current Balance</h3>
            <div class="summary-value">
                <span>${{account.balance}}</span>
            </div>
            <div class="summary-description">
                {{account.status}}
            </div>
        </div>
        <div class="summary-icon">
            <img src="assets/images/cash.svg" alt="cash icon" />
        </div>
    </div>
    <div class="summary-card">
        <div class="summary-content">
            <h3 class="summary-title">Transactions</h3>
            <div class="summary-value">
                <span>{{transactions.length}}</span>
            </div>
            <span class="summary-description">#Transactions</span>
        </div>
        <div class="summary-icon">
            <img src="assets/images/view_transaction.svg" alt="view transaction icon" />
        </div>
    </div>
</div>
<div class="container-with-info">
    <div class="profile-card">
        <div class="profile-header">
            <div class="profile-name">
                <img src="assets/images/user-1.jpg" alt="Profile Picture" class="profile-image">
                <h2>{{account.owner}}</h2>
            </div>
            <div class="profile-actions">
                <button class="edit-button" (click)="openEditModal()">Edit Account</button>
                <button class="transaction-button" (click)="openTransactionForm()">Create Transaction</button>
            </div>
        </div>
        <div class="profile-details">
            <div class="detail">
                <span class="detail-label">Account Number:</span>
                <span class="detail-value">{{ account.accountNumber }}</span>
            </div>
            <div class="detail">
                <span class="detail-label">Balance:</span>
                <span class="detail-value">${{ account.balance }}</span>
            </div>
            <div class="detail">
                <span class="detail-label">Status:</span>
                <span class="detail-value">{{ account.status }}</span>
            </div>
        </div>

        <div class="profile-stats">
            <div class="stat">
                <div class="stat-value">45</div>
                <div class="stat-label">Fixed issue</div>
            </div>
            <div class="stat">
                <div class="stat-value">+5</div>
                <div class="stat-label">años</div>
            </div>
        </div>
    </div>
    <div class="profile-card">
        <div class="profile-header">
            <div class="profile-name">
                
                <h2>Transaction Costs</h2>
            </div>
        </div>
        <div class="profile-details">
            <div class="detail">
                <span class="detail-label">Depósito desde sucursal:</span>
                <span class="detail-value">0$.</span>
            </div>
            <div class="detail">
                <span class="detail-label">Depósito desde cajero automático:</span>
                <span class="detail-value">1$</span>
            </div>
            <div class="detail">
                <span class="detail-label">Depósito desde otra cuenta::</span>
                <span class="detail-value">1.5$</span>
            </div>
            <div class="detail">
                <span class="detail-label">Compra en establecimiento físico:</span>
                <span class="detail-value">0$</span>
            </div>
            <div class="detail">
                <span class="detail-label">Compra con tarjeta en página web:</span>
                <span class="detail-value">5$</span>
            </div>
            <div class="detail">
                <span class="detail-label">Retiro en cajero automático:</span>
                <span class="detail-value">1$</span>
            </div>
        </div>
    </div>
</div>



<div class="invoice-container">
    @for (transaction of displayedTransactions; track transaction.transactionId; let i = $index) {
    <div class="invoice-card">
        <div class="invoice-header">
            <div class="invoice-number">#{{ (currentPage - 1) * itemsPerPage + i + 1 }}</div>

        </div>
        <div class="invoice-details">
            <div class="invoice-section">
                <div class="invoice-title">Transaction Date:</div>
                <div class="invoice-value">{{transaction.date |date:'medium'}}</div>
                <div class="invoice-title">Account:</div>
                <div class="invoice-value">{{account.accountNumber}}</div>
                <div class="invoice-title">Type:</div>
                <div class="invoice-value">{{transaction.transactionType}}</div>
            </div>
        </div>
        <table class="invoice-table">
            <thead>
                <tr>
                    <th>Amount</th>
                    <th>Cost</th>
                    <th>Total Cost</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{transaction.amount}}</td>
                    <td>{{transaction.transactionCost}}</td>
                    <td>{{transaction.amount + transaction.transactionCost}}</td>
                </tr>
            </tbody>
        </table>
        <div class="invoice-total">
            <div class="subtotal">
                <span>Sub total:</span>
                <span>{{transaction.amount}}</span>
            </div>
            <div class="grand-total">
                <span>Grand Total:</span>
                <span>{{transaction.amount + transaction.transactionCost}}</span>
            </div>
        </div>
    </div>
    }
</div>
@if(transactions && transactions.length > itemsPerPage) {
<div class="pagination">
    <button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
</div>
}

} @else {
<div class="profile-card">
    <p>No se encontraron detalles de la cuenta</p>
</div>
}

@if (showEditModal) {
<app-account-modal [accountNumber]="accountNumber" (close)="closeEditModal()"></app-account-modal>
}

@if (showTransactionForm) {
<app-transaction-modal [balance]="balance" [accountNumber]="accountNumber"
    (close)="closeTransactionForm()"></app-transaction-modal>
}